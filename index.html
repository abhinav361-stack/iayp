<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>IAYP Diary Checker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.json">
</head>

<body style="font-family: Arial; padding: 16px;">
  <h2>IAYP Diary Checker</h2>

  <label>Award Level</label><br>
  <select id="level">
    <option>Bronze</option>
    <option>Silver</option>
    <option>Gold</option>
  </select><br><br>

  <textarea id="diary" rows="15" style="width:100%;"
  placeholder="Paste diary text here"></textarea><br><br>

  <button onclick="check()">Check Diary</button>
  <button onclick="fill()">Auto-Fill</button>
  <button onclick="report()">Generate Report</button>

  <pre id="output"></pre>

<script>
async function callGPT(mode) {
  document.getElementById("output").innerText = "Processing...";
  
  const response = await fetch("https://iayp.onrender.com/chat", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      mode: mode,
      level: document.getElementById("level").value,
      text: document.getElementById("diary").value
    })
  });
  const data = await response.json();
  document.getElementById("output").innerText = data.result;
}

function check(){ callGPT("check"); }
function fill(){ callGPT("fill"); }
function report(){ callGPT("report"); }
</script>
</body>
</html>

